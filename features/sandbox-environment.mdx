---
title: 'Sandbox'
description: 'Secure isolated environment with pre-installed development tools and runtimes for code analysis and modification.'
icon: 'box'
---

The Tembo Sandbox provides a secure, isolated environment where Tembo operates to analyze and modify your code. This environment comes pre-installed with a comprehensive set of development tools and runtime environments to support a wide variety of programming languages and frameworks.

## Pre-installed Tools and Runtimes

Tembo builds the sandbox image from a pinned Nix flake. Tool versions track that pin and are updated regularly—run `tool --version` or `tembo --version` inside a session to check the current build.

### Core shell & diagnostics

- `bash`, `toybox`, `curl`, `wget`, `jq`, `ripgrep`, `ast-grep`, `bat`, `vim`, `lnav`, `direnv`, `httpie`, `strace`, `lsof`, `inotifywait`/`inotifywatch` (from `inotify-tools`), and `gnumake`

### Version control & automation

- `git`, GitHub CLI (`gh`), the Tembo credential helper (`git-credential-tembo`), the `tembo` CLI, `awscli2`, and the `devcontainer` CLI (available in the QEMU sandbox)
- Chromium is pre-installed for browser automation workflows (Playwright MCP, headless testing, etc.)

### JavaScript and TypeScript

- Node.js 22 LTS, pnpm, and Bun for installing and running modern JavaScript and TypeScript projects

### Python

- `uv` (bundled with Python 3.12) and `ruff` for linting; use `uv python`/`uv pip` to manage virtual environments without needing `pipx`

### Go and Rust

- Go 1.22+ and the Rust toolchain manager (`rustup`) so you can install and pin specific toolchains on demand

### Ruby

- Ruby 3.3 with Bundler, RuboCop, and RSpec core

### Elixir and Erlang

- Erlang/OTP 28, Elixir 1.18, Hex, Rebar3, and Erlfmt for BEAM-based projects

### AI agent CLIs and MCP tooling

- CLI wrappers for Codex, Claude Code, Cursor, OpenCode, AMP, and Gemini so you can run the same assistants Tembo uses inside the sandbox
- Pre-configured MCP servers (GitHub, GitLab, Notion, Playwright, Postgres, and Sentry) are exposed through `/etc/tembo/mcp.json`

## Sandbox Types

Tembo supports multiple sandbox environment types to accommodate different use cases and requirements:

### Docker (Default)

The Docker sandbox is the default environment type, offering:

- **Fast startup**: Containers start quickly for rapid task execution
- **Wide compatibility**: Works with most common development workflows
- **Resource efficient**: Lightweight containerization with minimal overhead (ideal for quick edits and lint/test loops)
- **Best for**: Most general-purpose tasks, web applications, and standard development workflows

### QEMU

The QEMU sandbox provides full virtual machine isolation using QEMU/KVM virtualization:

- **Complete isolation**: Full VM-level isolation for enhanced security
- **System-level access**: Support for tasks requiring deeper system integration
- **Custom kernels**: Ability to run specialized kernel configurations
- **Nested tooling**: Includes Docker-in-Docker support, the `devcontainer` CLI, and 4 vCPUs / 8 GB RAM by default for heavier workloads
- **Best for**: Tasks requiring enhanced isolation, system-level operations, or specialized environments

You can configure the sandbox type at the organization, issue, or job level. Tembo resolves the selection in this order: job override → issue override → organization default. If nothing is specified, Tembo defaults to the Docker sandbox type.

## Environment Characteristics

### Isolation and Security

The Tembo Sandbox provides strong isolation and security guarantees:

- **Process isolation**: Each task runs in its own isolated environment
- **File system isolation**: Changes are contained within the sandbox
- **Network security**: Controlled network access for security
- **Resource limits**: CPU and memory constraints to ensure stability

### Workspace Layout

- The default working directory is `/workspace`
- Each repository is cloned to `/workspace/repo-<repository-id>` to prevent naming collisions
- Multi-repo tasks surface a `<multirepo_instructions>` block with the exact directories Tembo created

### Development Workflow Integration

The sandbox environment is designed to integrate seamlessly with your development workflow:

- **Hook support**: Execute custom commands at different stages via [Tembo Hooks](/features/hooks)
- **Repository access**: Full access to your repository contents and history
- **Build tool compatibility**: Support for common build systems and package managers
- **Testing frameworks**: Compatible with popular testing tools and frameworks
- **Nix dev shell support (QEMU)**: Automatically detects Nix flakes and enters your `devShells.x86_64-linux.default`
- **Dev container support (QEMU)**: Detects `.devcontainer/devcontainer.json` and can run the `devcontainer` CLI inside the VM
- **Tembo & agent CLIs**: Access the `tembo` CLI, GitHub CLI, and agent CLIs (Claude, Cursor, Codex, etc.) for workflows that need direct command execution

### Nix Development Shells

Tembo's QEMU sandbox supports Nix flakes for reproducible development environments. (Docker sandboxes warn and skip dev shells.) To use this feature, your repository must have a `flake.nix` file in the root directory that defines a development shell named `default` for the `x86_64-linux` platform.

**Requirements:**
- Your `flake.nix` must specify `devShells.x86_64-linux.default`
- The development shell must target the x86_64-linux platform (Tembo's sandbox runs on x86_64 Linux)
- The flake must be in your repository's root directory

**Example flake.nix:**
```nix
{
  description = "My project development environment";

  inputs = {
    nixpkgs.url = "github:NixOS/nixpkgs/nixos-unstable";
  };

  outputs = { self, nixpkgs }: {
    devShells.x86_64-linux.default = nixpkgs.legacyPackages.x86_64-linux.mkShell {
      packages = with nixpkgs.legacyPackages.x86_64-linux; [
        nodejs
        python3
        # Add any other tools your project needs
      ];
    };
  };
}
```

When configured correctly, Tembo will:
- **Automatically detect** your `flake.nix` file at the repository root
- **Load the default devshell** for the x86_64-linux platform
- **Make available** all packages and environment variables defined in your Nix development shell
- **Ensure reproducibility** across different tasks and environments

> Tip: run `nix develop` locally to confirm the shell resolves before relying on it in the sandbox.

**How it works (QEMU only):**
When a coding agent executes commands in the sandbox, Tembo automatically enters your Nix development shell if a `flake.nix` is detected. Docker sandboxes log a warning and continue with the base image so you always get a working shell, even without QEMU.

### Dev Containers (QEMU only)

When the QEMU sandbox finds `.devcontainer/devcontainer.json` in your repository it automatically runs `devcontainer up --workspace-folder .` and routes subsequent agent commands through `devcontainer exec`. This lets Tembo reuse the same Docker-based development environment your team uses locally (including nested Docker).

**Example `.devcontainer/devcontainer.json`:**
```json
{
  "name": "Tembo Devcontainer",
  "image": "mcr.microsoft.com/devcontainers/typescript-node:20",
  "postCreateCommand": "pnpm install"
}
```

Keep devcontainers lean—large image builds increase startup time even inside the VM. If you need to disable devcontainer support for a particular repo, remove or rename the `.devcontainer` directory.

## Environment Variables

Tembo injects several environment variables into every sandbox session:

- `TEMBO_API_TOKEN` for authenticated API access back to Tembo
- `TEMBO_ORG_ID`, `TEMBO_ISSUE_ID`, `TEMBO_SOLUTION_ID`, `TEMBO_JOB_ID`, and (when present) `TEMBO_WORKFLOW_ID` for contextual metadata
- Built-in service URLs: `API_BASE_URL`, `OPENAI_BASE_URL`, and `ANTHROPIC_BASE_URL`

You can add additional secrets or environment variables under **Settings → Sandbox** in the Tembo dashboard. These values are scoped to your organization and are injected into every command Tembo runs, including hooks and MCP servers.

## Best Practices

When working with the Tembo Sandbox environment:

### Dependency Management

- **Use existing tools**: Leverage the pre-installed package managers and tools when possible
- **Specify versions**: When installing additional dependencies, pin to specific versions for reproducibility
- **Cache efficiently**: Use package manager caching features to improve build times

### Resource Optimization

- **Minimize installations**: Avoid installing large dependencies unless necessary
- **Clean up**: Remove temporary files and build artifacts when possible
- **Use lightweight alternatives**: Choose lighter-weight tools when multiple options are available

### Compatibility Considerations

- **Version awareness**: Be aware of the pre-installed tool versions when writing build scripts
- **Cross-language support**: Take advantage of the multi-language environment for polyglot projects
- **Tool conflicts**: Be mindful of potential conflicts between different language ecosystems

### Nix Development Shell Tips

- **Use the QEMU sandbox**: Dev shells currently require the VM; Docker sandboxes log a warning and continue without the flake
- **Use Nix for complex dependencies**: If your project requires specific tool versions or uncommon dependencies, consider using a Nix development shell instead of relying on pre-installed tools
- **Test locally**: Use `nix develop` locally to verify your flake configuration before relying on it in Tembo
- **Keep flakes minimal**: Include only the dependencies your project needs to reduce environment setup time

## Support and Updates

The Tembo Sandbox environment is regularly updated to include:

- Security patches for all installed tools
- Updates to major language runtimes and package managers  
- New tools based on community feedback and usage patterns

If you need a specific tool or version that isn't currently available, please reach out to the Tembo team through your dashboard or contact support.
